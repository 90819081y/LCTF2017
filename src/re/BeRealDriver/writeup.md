# BeRealDriver

本题有一个指向Wikipedia LDW页面的Hint，是因为题目设计之初是想模仿现代汽车上常用的LDW系统。题目文件中含有两张图片，分别对应着LDW输入的地图，和驾驶员采取的驾驶路径。程序中的LDW首先判断驾驶路径是否在地图许可的范围内，如果不在，就报警；接下来另一个模块会检查驾驶路径是否经过了预设的几个危险点，如果没有经过，认为攻击失败。满足以上所有条件，即可得到flag。参赛者需要在分析以上程序逻辑的基础上提供两个文件，这两个文件（同样是图片）和上文中提到的两张内置图片分别异或后，作为被攻击者影响之后的地图和驾驶员操作，提供给上述的判断逻辑。

由此，一个简单的攻击思路是，提取出程序内置的两张图片之后，用Photoshop的自由变形功能，扭曲两张图片，使其经过指定位置，之后将新图片和原图片分别异或，并提交结果，即可得到正确解答。

这个题主要的坑点应该是OpenCV。很多人反馈跑不起来，这个和库版本有关系，我用的是最新版的库。另外还有人被Windows 10的图片查看器坑了，唉，临门一脚……所以劝大家多用Linux，你看Linux下连个像样的好看的图片查看器都没有（除了chromium），自然不会发生这种问题。此外另一个坑点是由于我写的算法鲁棒性太差，如果输入数据的连续性不够就会segfault……

题目设计之初本来是想按照真正的LDW工作，由三个线程构成，一个负责输出摄像头和操作数据，一个负责做LDW，另一个负责做危险点检测，且把核心逻辑放到CUDA中。但由于自己码力不太够，只能采取目前这种伪LDW设计，希望大家还是玩的开心。

题目源代码已经在https://github.com/SilverBut/LCTF2017_BeRealDriver 公开，上述的两张图片可在 `LCTF2017_BeRealDriver/code/examples` 中找到，题目设计思路文档可在 `LCTF2017_BeRealDriver/doc` 中找到。